---
const { items = [] } = Astro.props as { items: FooterItem[] };

interface FooterItem {
  name: string;
  href: string; 
  icon?: string;
}

let base = import.meta.env.BASE_URL;
if (!base.endsWith("/")) base += "/";

const defaultItems: FooterItem[] = [
  { name: "Inicio", href: base },
  { name: "Sobre mÃ­", href: `${base}Sobre-mi/` },
  { name: "Proyectos", href: `${base}Proyectos/` },
  { name: "Conocimientos", href: `${base}Conocimientos/` },
];


const menu = (items.length > 0 ? items : defaultItems);

const currentPath = Astro.url.pathname;

const isActive = (href: string) => {
  const normalize = (p: string) => p.endsWith("/") ? p : p + "/";

  return normalize(currentPath) === normalize(new URL(href, Astro.site).pathname);
};

---

<footer class="fixed bottom-0 left-0 w-full backdrop-blur-xl bg-black/40 border-t border-white/10 z-40 shadow-[0_-4px_30px_rgba(0,0,0,0.4)]">
  <div class="max-w-4xl mx-auto grid grid-cols-4 text-center text-xs py-3">
    {menu.map((item) => (
      <a
        href={item.href}
        class={[
          "flex flex-col items-center gap-1 transition-all duration-300 rounded-xl py-2",
          "hover:bg-white/10 hover:shadow-lg hover:shadow-purple-500/30",
          isActive(item.href)
            ? "text-purple-400 font-semibold bg-white/10 shadow-inner shadow-purple-500/20"
            : "text-gray-300"
        ].join(" ")}
      >
        <span class="material-symbols-outlined text-lg transition-all duration-300">
          {item.icon ?? "circle"}
        </span>
        <span class="truncate">{item.name}</span>
      </a>
    ))}
  </div>
</footer>
