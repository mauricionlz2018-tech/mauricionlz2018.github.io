---
const { items = [] } = Astro.props as { items: FooterItem[] };

interface FooterItem {
  name: string;
  href: string; 
  icon?: string;
}

let base = import.meta.env.BASE_URL;
if (!base.endsWith("/")) base += "/";

const defaultItems: FooterItem[] = [
  { name: "Inicio", href: base, icon: "home" },
  { name: "Sobre mí", href: `${base}Sobre-mi/`, icon: "person" },
  { name: "Proyectos", href: `${base}Proyectos/`, icon: "code" },
  { name: "Conocimientos", href: `${base}Conocimientos/`, icon: "school" },
  { name: "Contacto", href: `${base}contact/`, icon: "mail" },
  { name: "Blog", href: `${base}Blog/`, icon: "article" },
];

const menu = (items.length > 0 ? items : defaultItems);
const currentPath = Astro.url.pathname;

const isActive = (href: string) => {
  const normalize = (p: string) => p.endsWith("/") ? p : p + "/";
  return normalize(currentPath) === normalize(new URL(href, Astro.site).pathname);
};
---

<footer class="fixed bottom-0 left-0 w-full backdrop-blur-xl bg-black/80 border-t border-white/20 z-50 shadow-[0_-8px_32px_rgba(0,0,0,0.5)]">
  <div class="max-w-4xl mx-auto px-4">
    <nav class="flex items-center justify-between py-3">
      {menu.map((item) => (
        <a
          href={item.href}
          class={[
            "flex flex-col items-center justify-center gap-1",
            "transition-all duration-300 rounded-lg px-3 py-2 min-w-[70px]",
            "hover:bg-white/15 hover:scale-105 active:scale-95",
            "transform-gpu",
            isActive(item.href)
              ? "text-purple-300 font-semibold bg-gradient-to-b from-purple-500/20 to-transparent shadow-lg shadow-purple-500/20"
              : "text-gray-300 hover:text-white"
          ].join(" ")}
          title={item.name}
        >
          <span class="material-symbols-outlined text-xl transition-all duration-300">
            {item.icon ?? "star"}
          </span>
          <span class="text-xs font-medium truncate max-w-full">{item.name}</span>
        </a>
      ))}
    </nav>
  </div>
</footer>

<style>
  /* Asegurar que el footer no tape contenido importante */
  body {
    padding-bottom: 5rem;
  }
  
  /* Animación suave para hover */
  @media (hover: hover) {
    a {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
  }
</style>